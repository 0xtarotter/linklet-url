<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- 其他头部内容保持不变 -->
    <style>
        /* 保留其他样式 */

        nav {
            width: 100%;
            height: 18px; /* 固定高度为18px */
            background-color: #000000;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            display: flex;
            align-items: center; /* 垂直居中 */
            padding: 0 5%; /* 两侧留出空间 */
        }

        nav ul {
            list-style: none;
            display: flex;
            align-items: center;
            margin: 0;
            padding: 0;
            width: 100%;
        }

        .nav-left {
            margin-right: auto; /* logo靠左 */
        }

        .nav-right {
            display: flex;
            gap: 1rem; /* 菜单项之间的间距 */
        }

        nav ul li {
            margin: 0;
            font-size: 12px; /* 适应18px高度的字体大小 */
            line-height: 18px;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }

        nav ul li a:hover {
            text-decoration: underline;
        }

        /* 移动端适配 */
        @media screen and (max-width: 768px) {
            nav {
                height: auto; /* 移动端自适应高度 */
                padding: 5px 5%;
            }

            nav ul {
                flex-direction: column;
                align-items: flex-start;
            }

            .nav-right {
                flex-wrap: wrap;
                justify-content: flex-end;
                margin-top: 5px;
            }

            nav ul li {
                margin: 2px 0;
            }
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li class="nav-left"><b style="color:#fff;">URL缩短<sup> (Free)</sup></b></li>
            <div class="nav-right">
                <li><a href="https://cesu.wang">🚀网络测速</a></li>
                <li><a href="https://ip.icu">🗺️IP查询</a></li>
                <li><a href="https://shishui.de">🌏WHOIS查询</a></li>
                <li><a href="https://imges.object.us.kg">🖼️FREE图床</a></li>
                <li><a href="https://jpg.cat">🛤️IMAGES压缩</a></li>
                <li><a href="https://doma.ink">🌐DomainKing</a></li>
            </div>
        </ul>
    </nav>
    <header><h1>SDWZ Shortlink<sup> (Free)</sup></h1></header>

<div id="notification-bar">
    <span>如果你发现域名被墙或你想使用自己的域名，请直接CNAME本域名。🗝️<a href="/">本站支持API调用</a>！</span>
    <span class="close-btn" onclick="closeNotificationBar()">&times;</span>
</div>
    
    <main x-data="app" x-cloak>
      <p x-show.transition.opacity="alert" :class="alert?.type" x-text="alert?.message"></p>
      <input placeholder="输入要缩短的网址..." x-model="url" x-ref="url" />
      <details>
        <summary>自定义设置</summary>
        <div>
          <input placeholder="slug" x-model="slug" />
          <small>不设置则随机生成 slug</small>
        </div>
      </details>
      <button :class="{ loading }" :disabled="loading || isValidated()" @click="submit($refs, $nextTick)">生成</button>
    </main>
    <footer>
      <center>
        <a href="https://39mi.com" target="_blank" style="text-decoration:none;"> <img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNDUiIGhlaWdodD0iNDUiPjxwYXRoIGQ9Ik01MTEuMTI1IDYzLjU2MmMyNDcuMDA3IDAgNDQ3LjI0OCAyMDAuMjQxIDQ0Ny4yNDggNDQ3LjI1IDAgMjQ3LjAxLTIwMC4yNDEgNDQ3LjI1LTQ0Ny4yNDggNDQ3LjI1LTI0Ny4wMSAwLTQ0Ny4yNTEtMjAwLjI0LTQ0Ny4yNTEtNDQ3LjI1IDAtMjQ3LjAwOSAyMDAuMjQtNDQ3LjI1IDQ0Ny4yNTEtNDQ3LjI1eiIgZmlsbD0iI0VFRSIvPjxwYXRoIGQ9Ik03MTEuNjc3IDkwNy44NzJjLTU5LjIxMyAyOC45MzYtMTI1LjczNyA0NS4yMi0xOTYuMDgxIDQ1LjIyLTg2LjcyNyAwLTE2Ny42MzUtMjQuNzYtMjM2LjE4OC02Ny40OSA3OS4yMzctMjAuNDY3IDE1NS44MjUtMTIuMjE0IDE3My4yMzQtNDguMTY2IDQwLjgxNi04MC4zMzcgMjAuNDE4LTExMC44Mi0zNi45NzQtMTIxLjE2OC03OC4wMy0yMC45NTItOTguOTcyLTU0LjgyOC04OS4xODQtMjUxLjk3OCAxOS4zMjUtMTA0LjQ0NCA0LjEtMzAzLjQxNCAyNDUuMDM2LTI2Ny40MDMgMjQ1Ljc0NyAzNi43NDYgMTcyLjIwNiAyNDYuODEgNjkuMjcyIDUwMC41NzQtNTIuODIyIDEzMC4yMzEgMjYuMDAzIDE4OC43MDYgNzAuODg1IDIxMC40MTF6IiBmaWxsPSIjRkZGIi8+PC9zdmc+" /> <br /> <img src="https://park.39mi.com/img/domainking.svg" height="auto" width="150" /> <br /> </a>
        <a style="font-size:10px;color:#dedede;">owner</a>
      </center>
    </footer>
	 
    <script>
    function showNotificationBar() {
        var bar = document.getElementById("notification-bar");
        bar.className = "show";
        setTimeout(function() {
            closeNotificationBar();
        }, 15000);
    }

    function closeNotificationBar() {
        var bar = document.getElementById("notification-bar");
        bar.className = bar.className.replace("show", "");
    }

    // 调用showNotificationBar函数来显示提示条
    window.onload = function() {
        showNotificationBar();
    }
</script>
    
    
    <script src="asset/js/alpine.js"></script>
    <script>
      const app = {
        url: '',
        slug: '',
        alert: null,
        loading: false,
        isValidated () {
          return !/^https?:\/\/.{3,}/.test(this.url)
        },
        submit ($refs, $nextTick) {
          if (!this.url) {
            this.alert = { type: 'error', message: '缺少必需的参数：url。' }
            return
          }

          if (this.isValidated()) {
            this.alert = { type: 'error', message: '非法格式：url。' }
            return
          }

          this.alert = null
          this.loading = true

          const body = { url: this.url }
          if (this.slug) body.slug = this.slug

          fetch('/create', {
            method: 'post',
            headers: { 'content-type': 'application/json' },
            body: JSON.stringify(body)
          })
            .then(res => res.json())
            .then(res => {
              this.loading = false
              if (res.message) {
                this.alert = { type: 'error', message: res.message }
                return
              }

              this.url = res.link

              $nextTick(() => {
                $refs.url.select()
                this.alert = { type: 'success', message: `链接 ${document.execCommand('Copy') ? '复制' : '生成'} ` }
              })
            })
            .catch(e => {
              this.alert = { type: 'error', message: e.message }
              this.loading = false
            })
        }
      }
    </script>

</body>
</html>
